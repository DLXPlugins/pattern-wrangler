"use strict";(globalThis.webpackChunkpattern_wrangler=globalThis.webpackChunkpattern_wrangler||[]).push([[539],{5539:(t,e,r)=>{r.r(e),r.d(e,{default:()=>Jt});var n=r(6087),a=r(9491),o=r(3162),i=r(8985),l=r(9877),c=r(7723),u=r(6427),s=r(1455),f=r.n(s),p=r(4247),d=r(3832),h=r(7143),y=r(8270),v=r.n(y),m=r(1609),g=r.n(m),w=r(9804),b=r(7946),E=r(8723),_=r(6942),S=r.n(_),x=r(5556),L=r.n(x),P=r(195);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function T(){return T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T.apply(null,arguments)}function R(t,e,r){return(e=function(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var N=function(t){var e=t.message,r=t.status,n=t.politeness,a=t.icon,o=t.className,i=t.inline,l=t.children,s=t.hasToTop,f=void 0!==s&&s;(0,m.useEffect)((function(){(0,P.speak)(e,n)}),[e,r,n]);var p,d=function(){return null!==a},h=S()(o,"dlx-pw-admin__notice",R(R(R({"dlx-pw-admin__notice--has-icon":d()},"dlx-pw-admin__notice-type--".concat(r),!0),"dlx-pw-admin__notice-appearance--inline",i),"dlx-pw-admin__notice-appearance--block",!i)),y=[{label:(0,c.__)("Back to Top","wp-dlx-pw-comments"),url:"#dlx-pw-admin-header",variant:"link",className:"dlx-pw-admin__notice-action dlx-pw-admin__notice-action--to-top"}];return g().createElement("div",{className:h},g().createElement(u.Notice,T({isDismissible:!1,spokenMessage:e,actions:f?y:[]},t),d()&&g().createElement("div",{className:"dlx-pw-admin__notice-icon"},(p=a,g().createElement(p,{width:16,height:16,fill:"#6c757d"}))),g().createElement("div",{className:"dlx-pw-admin__notice-message"},g().createElement(g().Fragment,null,e," ",l," "))))};N.defaultProps={message:"",status:"info",politeness:"polite",icon:null,className:"",inline:!1,hasToTop:!1},N.propTypes={message:L().string.isRequired,status:L().oneOf(["info","warning","success","error"]),politeness:L().oneOf(["assertive","polite"]),icon:L().func,className:L().string,inline:L().bool,hasToTop:L().bool};const k=N;function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const C=function(t){var e=t.loadingMessage,r={type:t.type,message:t.message,title:t.title,isDismissable:!1,isPersistent:!1,isSuccess:!1,loadingMessage:e,politeness:"polite"},n=j((0,m.useState)(r),2),a=n[0],o=(n[1],j((0,m.useState)(!1),2)),i=o[0],l=(o[1],j((0,m.useState)(!1),2)),s=l[0],f=l[1];(0,m.useEffect)((function(){t.isVisible&&setTimeout((function(){t.onClose()}),5e3)}),[t.isVisible]);var p=function(){switch(a.type){case"success":return g().createElement(w.A,null);case"error":case"critical":return g().createElement(b.A,null);default:return g().createElement(E.A,null)}};return g().createElement(g().Fragment,null,g().createElement(u.Snackbar,{className:S()("dlx-pw-snackbar dlx-pw-snackbar-".concat(a.type),{"dlx-pw-snackbar-loading":i}),actions:function(){var t=[];return"success"===a.type&&t.push({label:(0,c.__)("Back to Top","pattern-wrangler"),url:"#dlx-pw-admin-header",variant:"link",className:"dlx-pw-admin__notice-action dlx-pw-admin__notice-action--to-top"}),t}(),icon:p(),onDismiss:function(){f(!1),t.onClose()},explicitDismiss:a.isDismissable},i?e:a.message)," ",s&&function(){if("critical"===a.type)return g().createElement(u.Modal,{className:S()("dlx-pw-modal dlx-pw-modal-".concat(a.type),{"dlx-pw-modal-loading":i}),bodyOpenClassName:"dlx-pw-modal-body-open",title:a.title,onRequestClose:function(){f(!1)},isDismissible:!0,shouldCloseOnClickOutside:a.isPersistent,shouldCloseOnEsc:a.isPersistent},g().createElement(k,{message:a.message,status:a.type,politeness:a.politeness,icon:p,inline:!1}),g().createElement("div",{className:"dlx-pw-modal-button-group"},g().createElement(u.Button,{className:"button button-error",variant:"secondary",onClick:function(){f(!1)}},(0,c.__)("OK","pattern-wrangler"))))}()," ")};r(4912);var D=r(418),G=r(9785);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function I(){I=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==F(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(F(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function B(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const q=function(t){var e,r=t.categories||[],n=(t.categories||[]).map((function(t){return t.label||t.name})),a=(t.patternCategories||[]).map((function(t){return t.label||t.name})),o=V((0,m.useState)(t.copyPatternId||0),1)[0],i=V((0,m.useState)(t.syncedDefaultStatus||"synced"),1)[0],l=V((0,m.useState)(t.syncedDisabled||!1),1)[0],s=V((0,m.useState)(!1),2),p=s[0],d=s[1],h=V((0,m.useState)(t.isEditMode||!1),2),y=h[0],v=(h[1],(0,G.mN)({defaultValues:{patternId:t.patternId||0,patternNonce:t.patternNonce||"",patternTitle:t.patternTitle||"",patternCategories:a||[],patternSyncStatus:t.patternSyncStatus||i,patternCopyId:o}})),w=v.control,b=(v.getValues,v.handleSubmit),E=(v.reset,v.setError),_=(v.trigger,v.setValue,(0,G.FH)({control:w}),(0,G.lN)({control:w})),S=_.errors,x=(_.isDirty,_.dirtyFields,function(){var e,n=(e=I().mark((function e(n){var a,o,i,l,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),a=n.patternCategories.map((function(t){return{name:t,id:(e=t,n=r.find((function(t){return(t.label||t.name).toLowerCase()===e.toLowerCase()})),n?n.id:0)};var e,n})),o=y?"/dlxplugins/pattern-wrangler/v1/patterns/update/":"/dlxplugins/pattern-wrangler/v1/patterns/create/",e.next=5,f()({path:o,method:"POST",data:{patternId:n.patternId,patternNonce:n.patternNonce,nonce:dlxEnhancedPatternsView.createNonce,patternTitle:n.patternTitle,patternCategories:a,patternSyncStatus:n.patternSyncStatus,patternCopyId:n.patternCopyId}});case 5:null!=(i=e.sent)&&i.error?E("patternTitle",{message:i.error}):(l=i.patternId,y?t.onEdit(i):(c=encodeURIComponent(window.location.href),window.location.href="".concat(dlxEnhancedPatternsView.getSiteBaseUrl,"post.php?post=").concat(l,"&action=edit&redirect_to=").concat(c))),d(!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){B(o,n,a,i,l,"next",t)}function l(t){B(o,n,a,i,l,"throw",t)}i(void 0)}))});return function(_x){return n.apply(this,arguments)}}());return g().createElement(g().Fragment,null,g().createElement(u.Modal,{title:t.title||(0,c.__)("Add Pattern","pattern-wrangler"),onRequestClose:t.onRequestClose,focusOnMount:"firstContentElement"},g().createElement("div",{className:"dlx-pw-modal-content"},g().createElement("form",{onSubmit:b(x)},g().createElement("div",{className:"dlx-pw-modal-admin-row"},g().createElement(G.xI,{control:w,name:"patternTitle",rules:{required:(0,c.__)("Pattern title is required.","pattern-wrangler")},render:function(t){var e=t.field;return g().createElement(u.TextControl,{label:(0,c.__)("Pattern Title","pattern-wrangler"),help:(0,c.__)("Enter the title of the pattern.","pattern-wrangler"),value:e.value,onChange:function(t){return e.onChange(t)},disabled:p})}})),g().createElement("div",{className:"dlx-pw-modal-admin-row"},g().createElement(G.xI,{control:w,name:"patternCategories[]",render:function(t){var e=t.field;return g().createElement(g().Fragment,null,g().createElement(u.FormTokenField,{label:(0,c.__)("Categories","pattern-wrangler"),help:(0,c.__)("Enter the categories of the pattern.","pattern-wrangler"),value:e.value,onChange:function(t){e.onChange(t)},tokenizeOnSpace:!1,allowMultiple:!0,placeholder:(0,c.__)("Add a category","pattern-wrangler"),suggestions:n,disabled:p,__experimentalShowHowTo:!1}),g().createElement("p",{className:"description"},(0,c.__)("Separate with commas or press the Enter key.","pattern-wrangler")))}})),g().createElement("div",{className:"dlx-pw-modal-admin-row"},g().createElement(G.xI,{control:w,name:"patternSyncStatus",render:function(t){var e=t.field;return g().createElement(g().Fragment,null,g().createElement(u.__experimentalToggleGroupControl,{label:(0,c.__)("Sync Status","pattern-wrangler"),isAdaptiveWidth:!0,value:e.value,onChange:function(t){e.onChange(t)},disabled:p||l},g().createElement(u.__experimentalToggleGroupControlOption,{value:"synced",label:(0,c.__)("Synced","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Synced","pattern-wrangler"),disabled:l}),g().createElement(u.__experimentalToggleGroupControlOption,{value:"unsynced",label:(0,c.__)("Unsynced","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Unsynced","pattern-wrangler"),disabled:l})))}})),g().createElement("div",{className:"dlx-pw-modal-admin-row dlx-pw-modal-admin-row-buttons"},g().createElement(u.Button,{variant:"primary",type:"submit",disabled:p},(e=(0,c.__)("Add Pattern","pattern-wrangler"),y&&(e=(0,c.__)("Save Pattern","pattern-wrangler")),p&&(e=(0,c.__)("Saving Pattern…","pattern-wrangler")),e)),g().createElement(u.Button,{variant:"secondary",onClick:t.onRequestClose,disabled:p},(0,c.__)("Cancel","pattern-wrangler"))),(null==S?void 0:S.patternTitle)&&g().createElement(k,{className:"dlx-pw-admin-notice",status:"error",inline:!0,icon:function(){return g().createElement(D.A,null)}},S.patternTitle.message)))))};function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function U(){U=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Q(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Q(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Y(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const W=function(t){var e,r,n,a=(r=(0,m.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(r,n)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],i=a[1],l=(0,G.mN)({defaultValues:{items:t.items||[],patternNonce:t.patternNonce||"",forceDelete:!1}}),s=l.control,p=(l.getValues,l.handleSubmit),d=(l.reset,l.setError,l.trigger,l.setValue,(0,G.FH)({control:s}),(0,G.lN)({control:s})),h=d.errors,y=(d.isDirty,d.dirtyFields,function(){var e,r=(e=U().mark((function e(r){var n,a;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),n=r.items.map((function(t){return{id:t.id,nonce:t.editNonce}})),e.next=5,f()({path:"/dlxplugins/pattern-wrangler/v1/patterns/pause/",method:"POST",data:{items:n}});case 5:a=e.sent,t.onPause(a,n),i(!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){Y(o,n,a,i,l,"next",t)}function l(t){Y(o,n,a,i,l,"throw",t)}i(void 0)}))});return function(_x){return r.apply(this,arguments)}}());return g().createElement(g().Fragment,null,g().createElement(u.Modal,{title:1===t.items.length?(0,c.__)("Disable Pattern","pattern-wrangler"):(0,c._n)("Disable Pattern","Disable Patterns",t.items.length,"pattern-wrangler"),onRequestClose:t.onRequestClose,focusOnMount:"firstContentElement"},g().createElement("div",{className:"dlx-pw-modal-content"},g().createElement("form",{onSubmit:p(y)},g().createElement("div",{className:"dlx-pw-modal-admin-row dlx-pw-modal-admin-row-buttons"},g().createElement(u.Button,{variant:"primary",type:"submit",disabled:o},(e=(0,c._n)("Disable Pattern","Disable Patterns",t.items.length,"pattern-wrangler"),o&&(e=(0,c._n)("Disabling Pattern…","Disabling Patterns…",t.items.length,"pattern-wrangler")),e)),g().createElement(u.Button,{variant:"secondary",onClick:t.onRequestClose,disabled:o},(0,c.__)("Cancel","pattern-wrangler"))),(null==h?void 0:h.patternTitle)&&g().createElement(k,{className:"dlx-pw-admin-notice",status:"error",inline:!0,icon:function(){return g().createElement(D.A,null)}},h.patternTitle.message)))))};function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function z(){z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==$(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError($(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function J(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const X=function(t){var e,r,n,a=(r=(0,m.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(r,n)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],i=a[1],l=(0,G.mN)({defaultValues:{items:t.items||[],patternNonce:t.patternNonce||"",forceDelete:!1}}),s=l.control,p=(l.getValues,l.handleSubmit),d=(l.reset,l.setError,l.trigger,l.setValue,(0,G.FH)({control:s}),(0,G.lN)({control:s})),h=d.errors,y=(d.isDirty,d.dirtyFields,function(){var e,r=(e=z().mark((function e(r){var n,a;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),n=r.items.map((function(t){return{id:t.id,nonce:t.editNonce}})),e.next=5,f()({path:"/dlxplugins/pattern-wrangler/v1/patterns/publish/",method:"POST",data:{items:n}});case 5:a=e.sent,t.onPublish(a,n),i(!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){J(o,n,a,i,l,"next",t)}function l(t){J(o,n,a,i,l,"throw",t)}i(void 0)}))});return function(_x){return r.apply(this,arguments)}}());return g().createElement(g().Fragment,null,g().createElement(u.Modal,{title:1===t.items.length?(0,c.__)("Publish Pattern","pattern-wrangler"):(0,c._n)("Publish Pattern","Publish Patterns",t.items.length,"pattern-wrangler"),onRequestClose:t.onRequestClose,focusOnMount:"firstContentElement"},g().createElement("div",{className:"dlx-pw-modal-content"},g().createElement("form",{onSubmit:p(y)},g().createElement("div",{className:"dlx-pw-modal-admin-row dlx-pw-modal-admin-row-buttons"},g().createElement(u.Button,{variant:"primary",type:"submit",disabled:o},(e=(0,c._n)("Publish Pattern","Publish Patterns",t.items.length,"pattern-wrangler"),o&&(e=(0,c._n)("Publishing Pattern…","Publishing Patterns…",t.items.length,"pattern-wrangler")),e)),g().createElement(u.Button,{variant:"secondary",onClick:t.onRequestClose,disabled:o},(0,c.__)("Cancel","pattern-wrangler"))),(null==h?void 0:h.patternTitle)&&g().createElement(k,{className:"dlx-pw-admin-notice",status:"error",inline:!0,icon:function(){return g().createElement(D.A,null)}},h.patternTitle.message)))))};function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function tt(){tt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Z(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Z(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function et(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const nt=function(t){var e,r,n,a=(r=(0,m.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(r,n)||function(t,e){if(t){if("string"==typeof t)return rt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],i=a[1],l=(0,G.mN)({defaultValues:{items:t.items||[],patternNonce:t.patternNonce||"",forceDelete:!1}}),s=l.control,p=(l.getValues,l.handleSubmit),d=(l.reset,l.setError,l.trigger,l.setValue,(0,G.FH)({control:s}),(0,G.lN)({control:s})),h=d.errors,y=(d.isDirty,d.dirtyFields,function(){var e,r=(e=tt().mark((function e(r){var n,a;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),n=r.items.map((function(t){return{id:t.id,nonce:t.editNonce}})),e.next=5,f()({path:"/dlxplugins/pattern-wrangler/v1/patterns/publish/",method:"POST",data:{items:n}});case 5:a=e.sent,t.onReenable(a,n),i(!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){et(o,n,a,i,l,"next",t)}function l(t){et(o,n,a,i,l,"throw",t)}i(void 0)}))});return function(_x){return r.apply(this,arguments)}}());return g().createElement(g().Fragment,null,g().createElement(u.Modal,{title:1===t.items.length?(0,c.__)("Re-enable Pattern","pattern-wrangler"):(0,c._n)("Re-enable Pattern","Re-enable Patterns",t.items.length,"pattern-wrangler"),onRequestClose:t.onRequestClose,focusOnMount:"firstContentElement"},g().createElement("div",{className:"dlx-pw-modal-content"},g().createElement("form",{onSubmit:p(y)},g().createElement("div",{className:"dlx-pw-modal-admin-row dlx-pw-modal-admin-row-buttons"},g().createElement(u.Button,{variant:"primary",type:"submit",disabled:o},(e=(0,c._n)("Re-enable Pattern","Re-enable Patterns",t.items.length,"pattern-wrangler"),o&&(e=(0,c._n)("Re-enabling Pattern…","Re-enabling Patterns…",t.items.length,"pattern-wrangler")),e)),g().createElement(u.Button,{variant:"secondary",onClick:t.onRequestClose,disabled:o},(0,c.__)("Cancel","pattern-wrangler"))),(null==h?void 0:h.patternTitle)&&g().createElement(k,{className:"dlx-pw-admin-notice",status:"error",inline:!0,icon:function(){return g().createElement(D.A,null)}},h.patternTitle.message)))))};function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ot(){ot=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==at(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(at(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function it(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const ct=function(t){var e,r,n,a=(r=(0,m.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(r,n)||function(t,e){if(t){if("string"==typeof t)return lt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],i=a[1],l=(0,G.mN)({defaultValues:{items:t.items||[],patternNonce:t.patternNonce||"",forceDelete:!1}}),s=l.control,p=(l.getValues,l.handleSubmit),d=(l.reset,l.setError,l.trigger,l.setValue,(0,G.FH)({control:s}),(0,G.lN)({control:s})),h=d.errors,y=(d.isDirty,d.dirtyFields,function(){var e,r=(e=ot().mark((function e(r){var n,a;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),n=r.items.map((function(t){return{id:t.id,nonce:t.editNonce}})),e.next=5,f()({path:"/dlxplugins/pattern-wrangler/v1/patterns/delete/",method:"POST",data:{items:n}});case 5:a=e.sent,t.onDelete(a,n),i(!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){it(o,n,a,i,l,"next",t)}function l(t){it(o,n,a,i,l,"throw",t)}i(void 0)}))});return function(_x){return r.apply(this,arguments)}}());return g().createElement(g().Fragment,null,g().createElement(u.Modal,{title:1===t.items.length?(0,c.__)("Delete Pattern","pattern-wrangler"):(0,c._n)("Delete Pattern","Delete Patterns",t.items.length,"pattern-wrangler"),onRequestClose:t.onRequestClose,focusOnMount:"firstContentElement"},g().createElement("div",{className:"dlx-pw-modal-content"},g().createElement("form",{onSubmit:p(y)},g().createElement("div",{className:"dlx-pw-modal-admin-row dlx-pw-modal-admin-row-buttons"},g().createElement(u.Button,{variant:"primary",type:"submit",isDestructive:!0,disabled:o},(e=(0,c._n)("Delete Pattern","Delete Patterns",t.items.length,"pattern-wrangler"),o&&(e=(0,c._n)("Deleting Pattern…","Deleting Patterns…",t.items.length,"pattern-wrangler")),e)),g().createElement(u.Button,{variant:"secondary",onClick:t.onRequestClose,disabled:o},(0,c.__)("Cancel","pattern-wrangler"))),(null==h?void 0:h.patternTitle)&&g().createElement(k,{className:"dlx-pw-admin-notice",status:"error",inline:!0,icon:function(){return g().createElement(D.A,null)}},h.patternTitle.message)))))};function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function st(){st=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==ut(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ut(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ft(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function pt(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){ft(o,n,a,i,l,"next",t)}function l(t){ft(o,n,a,i,l,"throw",t)}i(void 0)}))}}function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ht(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const yt=function(t){var e=dt((0,m.useState)(dlxEnhancedPatternsView.isMultisite),1)[0],r=dt((0,m.useState)(null),2),n=r[0],a=r[1],o=dt((0,m.useState)(null),2),i=o[0],l=o[1],s=function(){var t=pt(st().mark((function t(e,r){var n,a;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=document.createElement("button")).classList.add("dlx-pw-copy-shortcode"),n.innerHTML='<span class="dashicons dashicons-clipboard"></span>',a=function(){var t=pt(st().mark((function t(){var e,a,o;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!1,null===(e=navigator.clipboard)||void 0===e||!e.writeText){t.next=10;break}return t.prev=2,t.next=5,navigator.clipboard.writeText(r);case 5:a=!0,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:if(!a){(o=document.createElement("textarea")).value=r,o.style.position="fixed",o.style.opacity="0",o.style.pointerEvents="none",document.body.appendChild(o),o.select();try{document.execCommand("copy"),a=!0}catch(t){}document.body.removeChild(o)}a&&(n.innerHTML='<span class="dashicons dashicons-yes"></span>',setTimeout((function(){n.innerHTML='<span class="dashicons dashicons-clipboard"></span>'}),1500));case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),n.addEventListener("click",a),e.parentElement.appendChild(n),t.abrupt("return",(function(){n.removeEventListener("click",a),n.remove()}));case 7:case"end":return t.stop()}}),t)})));return function(_x,e){return t.apply(this,arguments)}}();(0,m.useEffect)((function(){n&&s(n,f())}),[n]),(0,m.useEffect)((function(){i&&s(i,p())}),[i]);var f=function(){return e&&t.item.siteId?'[wp_block slug="'.concat(t.item.slug,'" site_id="').concat(t.item.siteId,'"]'):'[wp_block slug="'.concat(t.item.slug,'"]')},p=function(){return e&&t.item.siteId?"<?php function_exists( 'pw_wp_block' ) ? pw_wp_block( '".concat(t.item.slug,"', ").concat(t.item.siteId,", $echo = true ) : ''; ?>"):"<?php function_exists( 'pw_wp_block' ) ? pw_wp_block( '".concat(t.item.slug,"', null, $echo = true ) : ''; ?>")};return g().createElement(g().Fragment,null,g().createElement(u.Modal,{title:(0,c.__)("Get Code","pattern-wrangler"),onRequestClose:t.onRequestClose,focusOnMount:"firstContentElement"},g().createElement("div",{className:"dlx-pw-modal-content"},g().createElement("p",{className:"description"},(0,c.__)("Use the fields below to get a shortcode or PHP function to output the pattern on your site.","pattern-wrangler")),g().createElement("div",{className:"dlx-pw-modal-admin-row"},g().createElement(u.TextControl,{label:(0,c.__)("Pattern Shortcode","pattern-wrangler"),value:f(),disabled:!0,ref:a,className:"dlx-pw-modal-admin-row-input"})),g().createElement("div",{className:"dlx-pw-modal-admin-row"},g().createElement(u.TextControl,{label:(0,c.__)("Pattern PHP Function","pattern-wrangler"),value:p(),disabled:!0,ref:l,className:"dlx-pw-modal-admin-row-input"})),g().createElement("div",{className:"dlx-pw-modal-admin-row dlx-pw-modal-admin-row-buttons"},g().createElement(u.Button,{variant:"secondary",onClick:t.onRequestClose},(0,c.__)("Cancel","pattern-wrangler"))))))};function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function mt(t){return function(t){if(Array.isArray(t))return gt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return gt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function wt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(r),!0).forEach((function(e){Et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Et(t,e,r){return(e=function(t){var e=function(t){if("object"!=vt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _t(){_t=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==vt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(vt(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function St(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}var xt={patterns:[],categories:[],assets:[],data:{patterns:[],categories:[],assets:[]},loading:!1,error:null},Lt={setPatterns:function(t){return{type:"SET_PATTERNS",patterns:t}},setPattern:function(t,e,r,n){return{type:"SET_PATTERN",patternId:t,patternTitle:e,patternCategories:r,patternCategorySlugs:n}},addPattern:function(t){return{type:"ADD_PATTERN",pattern:t}},disablePatterns:function(t){return{type:"DISABLE_PATTERNS",patternIdsAndNonces:t}},enablePatterns:function(t){return{type:"ENABLE_PATTERNS",patternIdsAndNonces:t}},setCategory:function(t,e){return{type:"SET_CATEGORY",categoryId:t,categoryTermData:e}},upsertCategory:function(t){return{type:"UPSERT_CATEGORY",categoryData:t}},setCategories:function(t){return{type:"SET_CATEGORIES",categories:t}},setAssets:function(t){return{type:"SET_ASSETS",assets:t}},setData:function(t){return{type:"SET_DATA",data:t}},setAllData:function(t,e,r,n){return{type:"SET_ALL_DATA",patterns:t,categories:e,assets:r,data:n}},setLoading:function(t){return{type:"SET_LOADING",loading:t}},setError:function(t){return{type:"SET_ERROR",error:t}},fetchData:function(){return function(){var t,e=(t=_t().mark((function t(e){var r,n;return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.dispatch,t.prev=1,r(Lt.setLoading(!0)),r(Lt.setError(null)),t.next=6,f()({path:(0,d.addQueryArgs)("/dlxplugins/pattern-wrangler/v1/patterns/all/",{nonce:dlxEnhancedPatternsView.getNonce}),method:"GET"});case 6:n=t.sent,r(n?Lt.setAllData(n.patterns,n.categories,n.assets,n):Lt.setError("Failed to fetch data")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(Lt.setError(t.t0.message||"Network error occurred"));case 13:return t.prev=13,r(Lt.setLoading(!1)),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){St(o,n,a,i,l,"next",t)}function l(t){St(o,n,a,i,l,"throw",t)}i(void 0)}))});return function(_x){return e.apply(this,arguments)}}()},deletePatterns:function(t){return{type:"DELETE_PATTERNS",patternIdsAndNonces:t}}},Pt=(0,h.createReduxStore)("dlxplugins/pattern-wrangler/patterns",{reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ALL_DATA":return bt(bt({},t),{},{patterns:e.patterns,categories:e.categories,assets:e.assets,data:e.data,loading:!1,error:null});case"SET_PATTERNS":return bt(bt({},t),{},{patterns:e.patterns});case"SET_CATEGORIES":return bt(bt({},t),{},{categories:e.categories});case"UPSERT_CATEGORY":var r=bt(bt({},e.categoryData),t.categories);return bt(bt({},t),{},{categories:r,data:bt(bt({},t.data),{},{categories:r})});case"SET_PATTERN":var n=e.patternCategories,a=e.patternCategorySlugs,o=t.patterns.map((function(t){return t.id===e.patternId?bt(bt({},t),{title:e.patternTitle,categories:n,categorySlugs:a}):t}));return bt(bt({},t),{},{patterns:o,data:bt(bt({},t.data),{},{patterns:o})});case"ADD_PATTERN":return bt(bt({},t),{},{patterns:[].concat(mt(t.patterns),[e.pattern]),data:bt(bt({},t.data),{},{patterns:[].concat(mt(t.patterns),[e.pattern])})});case"SET_CATEGORY":var i=t.categories.map((function(t){return t.id===e.categoryId?bt(bt({},t),e.categoryTermData):t}));return bt(bt({},t),{},{categories:i,data:bt(bt({},t.data),{},{categories:i})});case"SET_DATA":return bt(bt({},t),{},{data:e.data});case"SET_ASSETS":return bt(bt({},t),{},{assets:e.assets});case"SET_LOADING":return bt(bt({},t),{},{loading:e.loading});case"SET_ERROR":return bt(bt({},t),{},{error:e.error});case"DISABLE_PATTERNS":var l=e.patternIdsAndNonces,c=[];return t.patterns.forEach((function(t){l.some((function(e){return e.id===t.id}))&&(t.isDisabled=!0),c.push(t)})),bt(bt({},t),{},{patterns:[].concat(c),data:bt(bt({},t.data),{},{patterns:[].concat(c)})});case"ENABLE_PATTERNS":var u=e.patternIdsAndNonces,s=[];return t.patterns.forEach((function(t){u.some((function(e){return e.id===t.id}))&&(t.isDisabled=!1),s.push(t)})),bt(bt({},t),{},{patterns:[].concat(s),data:bt(bt({},t.data),{},{patterns:[].concat(s)})});case"DELETE_PATTERNS":var f=e.patternIdsAndNonces,p=mt(t.patterns).filter((function(t){return!f.some((function(e){return e.id===t.id}))}));return bt(bt({},t),{},{patterns:p,data:bt(bt({},t.data),{},{patterns:p})});default:return t}},actions:Lt,selectors:{getPatterns:function(t){return t.patterns},getCategories:function(t){return t.categories},getAssets:function(t){return t.assets},getData:function(t){return t.data},getLoading:function(t){return t.loading},getError:function(t){return t.error}}});(0,h.register)(Pt);const Ot=Pt;var Tt=r(4997);function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Nt(){Nt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Rt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Rt(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function kt(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function jt(){var t;return t=Nt().mark((function t(e){var r,n,a,o;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.text();case 2:r=t.sent,t.prev=3,n=JSON.parse(r),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(3),new Error("Invalid JSON file (cannot parse)");case 10:if(n.title){t.next=12;break}throw new Error("Pattern JSON missing a title");case 12:if(a="","string"!=typeof n.content){t.next=17;break}a=n.content,t.next=22;break;case 17:if(!Array.isArray(n.blocks)){t.next=21;break}a=(0,Tt.serialize)(n.blocks),t.next=22;break;case 21:throw new Error("Pattern JSON missing content or blocks array");case 22:return o="string"==typeof n.syncStatus?n.syncStatus:"unsynced",t.abrupt("return",{title:n.title,content:a,syncStatus:o});case 24:case"end":return t.stop()}}),t,null,[[3,7]])})),jt=function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){kt(o,n,a,i,l,"next",t)}function l(t){kt(o,n,a,i,l,"throw",t)}i(void 0)}))},jt.apply(this,arguments)}const At=function(_x){return jt.apply(this,arguments)};function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(r),!0).forEach((function(e){Ft(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ft(t,e,r){return(e=function(t){var e=function(t){if("object"!=Ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function It(t){return function(t){if(Array.isArray(t))return Yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ut(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(){Bt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),l=new N(n||[]);return a(i,"_invoke",{value:P(t,r,l)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function m(){}function g(){}function w(){}var b={};u(b,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(k([])));_&&_!==r&&n.call(_,i)&&(b=_);var S=w.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,i,l){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Ct(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,l)}),(function(t){r("throw",t,i,l)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function P(e,r,n){var a=p;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=O(l,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ct(e)+" is not iterable")}return g.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(L.prototype),u(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),u(S,c,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Vt(t,e,r,n,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,a)}function Mt(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){Vt(o,n,a,i,l,"next",t)}function l(t){Vt(o,n,a,i,l,"throw",t)}i(void 0)}))}}function qt(){return qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qt.apply(null,arguments)}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,e)||Ut(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(t,e){if(t){if("string"==typeof t)return Yt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(t,e):void 0}}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ht=function(t){var e=t.src,r=t.title,o=t.item,i=(0,n.useRef)(null),l=(0,n.useRef)(null),c=Qt((0,n.useState)(!1),2),u=c[0],s=c[1],f=Qt((0,n.useState)(1),2),p=f[0],d=f[1],h=Qt((0,n.useState)(0),2),y=h[0],v=h[1],m=Qt((0,n.useState)(0),2),g=m[0],w=m[1],b=Qt((0,n.useState)(1),2),E=b[0],_=b[1];(0,n.useEffect)((function(){var t=i.current;if(t){var e=function(){s(!0),v(o.viewportWidth||t.offsetWidth)};return t.addEventListener("load",e),function(){t.removeEventListener("load",e)}}}),[e]);var S=Qt((0,a.useResizeObserver)(),2),x=S[0],L=S[1],P=L.width,O=L.height;return(0,n.useEffect)((function(){if(void 0!==P&&u&&0!==y){var t=P/(y||800),e=P/O,r=Math.max(y*e,100);w(r),d(t),_(e);var n=new CustomEvent("dlxPatternPreviewResize",{detail:{width:P}});window.dispatchEvent(n);try{window.parent.dispatchEvent(n)}catch(t){}}}),[P,u]),(0,n.useEffect)((function(){i.current&&v(i.current.offsetWidth)}),[i,g]),React.createElement("a",{href:e,className:"pattern-preview-iframe-link",target:"_blank",rel:"noopener noreferrer",onClick:function(t){t.preventDefault(),Wt(o)},"aria-hidden":"true"},React.createElement("div",{className:"pattern-preview-iframe-scale-container-wrapper",ref:l,style:{transform:"scale(".concat(p,")")}},React.createElement("div",{className:"pattern-preview-iframe-scale-wrapper"},React.createElement("div",{className:"pattern-preview-iframe-scale-container"},x,React.createElement("div",{className:"pattern-preview-iframe-wrapper"},React.createElement("iframe",{ref:i,key:"preview-".concat(o.id),src:e,title:r,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",loading:"lazy",style:{position:"absolute",top:0,left:0,width:o.viewportWidth||800,aspectRatio:E,height:g+"px",maxHeight:"1200px",overflow:"visible"}}))))))},Wt=function(t){var e=t.viewportWidth||1200,r=null!=t&&t.id?"".concat(ajaxurl,"/?action=dlxpw_pattern_preview&pattern_id=").concat(t.id,"&viewport_width=").concat(e):"";i.Fancybox.show([{src:r,caption:t.title,type:"iframe",closeButton:!0}])},$t={grid:{layout:{titleField:"title",mediaField:"pattern-view-json",columns:2,columnGap:"24px",rowGap:"24px",showMedia:!0,viewConfigOptions:{}}}},zt=function(t){var e,r,a,i,s,y,v,m,g=t.data,w=Qt((0,n.useState)([]),2),b=w[0],E=w[1],_=(0,h.useSelect)((function(t){return{patterns:t(Ot).getPatterns()}})).patterns,S=Qt((0,n.useState)([]),2),x=S[0],L=S[1],P=(0,h.useSelect)((function(){return{categories:(0,h.select)(Ot).getCategories()}})).categories,O=((0,h.useSelect)((function(){return{assets:(0,h.select)(Ot).getAssets()}})).assets,Qt((0,n.useState)([]),2)),T=O[0],R=O[1],N=Qt((0,n.useState)(!0),2),k=N[0],j=N[1],A=Qt((0,n.useState)({isVisible:!1,message:"",title:"",type:""}),2),D=A[0],G=A[1],F=Qt((0,n.useState)(!1),2),I=F[0],B=F[1],V=Qt((0,n.useState)(!1),2),M=V[0],Q=V[1],U=Qt((0,n.useState)(0),2),Y=(U[0],U[1]),H=Qt((0,n.useState)(null),2),$=H[0],z=H[1],J=Qt((0,n.useState)(null),2),K=J[0],Z=J[1],tt=Qt((0,n.useState)(null),2),et=tt[0],rt=tt[1],at=Qt((0,n.useState)(null),2),ot=at[0],it=at[1],lt=Qt((0,n.useState)(null),2),ut=lt[0],st=lt[1],ft=Qt((0,n.useState)(null),2),pt=ft[0],dt=ft[1],ht=function(t){var e=t.isLocal,r=t.title,n="";e?n="unsynced":"synced"===t.patternType&&(n="synced");var a=JSON.stringify({__file:"wp_block",title:r,content:t.content,syncStatus:n},null,2);(0,o.downloadBlob)("".concat(r,".json"),a,"application/json")},vt=function(){var t,e,r,n,a,o;return{type:"grid",previewSize:"large",paginationInfo:{totalItems:_.length,totalPages:0},page:parseInt((0,d.getQueryArgs)(window.location.href).paged)||1,perPage:parseInt((0,d.getQueryArgs)(window.location.href).perPage)||12,defaultPerPage:12,sort:{field:(0,l.escapeAttribute)((0,d.getQueryArgs)(window.location.href).orderby||"title"),direction:(0,l.escapeAttribute)((0,d.getQueryArgs)(window.location.href).order||"asc")},titleField:"title",mediaField:"pattern-view-json",layout:$t.grid.layout,fields:["title","pattern-view-json"],search:(0,l.escapeAttribute)((null===(t=(0,d.getQueryArgs)(window.location.href))||void 0===t?void 0:t.search)||""),filters:[{field:"patternType",value:(null===(e=(0,d.getQueryArgs)(window.location.href))||void 0===e?void 0:e.patternType)||"all"},{field:"patternStatus",value:(null===(r=(0,d.getQueryArgs)(window.location.href))||void 0===r?void 0:r.patternStatus)||"both"},{field:"patternLocalStatus",value:(null===(n=(0,d.getQueryArgs)(window.location.href))||void 0===n?void 0:n.patternLocalStatus)||"both"},{field:"patternRegisteredStatus",value:(null===(a=(0,d.getQueryArgs)(window.location.href))||void 0===a?void 0:a.patternRegisteredStatus)||"both"},{field:"patternLocalRegisteredStatus",value:(null===(o=(0,d.getQueryArgs)(window.location.href))||void 0===o?void 0:o.patternLocalRegisteredStatus)||"both"}]}},mt=function(t){return React.createElement(React.Fragment,null,React.createElement("div",{className:"pattern-quick-links"},t.isLocal&&React.createElement(React.Fragment,null,!t.isDisabled&&React.createElement(React.Fragment,null,React.createElement(u.Button,{variant:"link",onClick:function(e){e.preventDefault(),e.stopPropagation(),z({item:t})}},(0,c.__)("Quick Edit","pattern-wrangler"))," | ",React.createElement(u.Button,{variant:"link",onClick:function(e){e.preventDefault(),e.stopPropagation(),dt({item:t})}},(0,c.__)("Get Code","pattern-wrangler"))," | "),React.createElement(u.Button,{variant:"link",onClick:function(e){e.preventDefault(),e.stopPropagation(),ht(t)}},(0,c.__)("Export Pattern","pattern-wrangler"))),!t.isLocal&&React.createElement(React.Fragment,null,React.createElement(u.Button,{variant:"link",onClick:function(e){e.preventDefault(),e.stopPropagation(),Y(t.id),Q({item:t})}},(0,c.__)("Copy to Local","pattern-wrangler"))," | ",React.createElement(u.Button,{variant:"link",onClick:function(e){e.preventDefault(),e.stopPropagation(),ht(t)}},(0,c.__)("Export Pattern","pattern-wrangler")))))},gt=Qt((0,n.useState)(vt()),2),wt=gt[0],bt=gt[1],Et=(0,n.useMemo)((function(){return[{id:"title",label:(0,c.__)("Title","pattern-wrangler"),render:function(t){var e=t.item;if(null==e||!e.categorySlugs||0===e.categorySlugs.length)return React.createElement("div",{className:"pattern-title-categories"},React.createElement("div",{className:"pattern-title"},e.isLocal&&React.createElement(u.Button,{variant:"link",onClick:function(t){t.preventDefault();var r=encodeURIComponent(window.location.href);window.location.href="".concat(dlxEnhancedPatternsView.getSiteBaseUrl,"post.php?post=").concat(e.id,"&action=edit&redirect_to=").concat(r)}},e.title),!e.isLocal&&React.createElement("span",{className:"pattern-title"},e.title)),React.createElement("div",{className:"pattern-categories"},(0,c.__)("No categories","pattern-wrangler")),mt(e));var r=(0,h.select)(Ot).getCategories();return React.createElement(React.Fragment,null,React.createElement("div",{className:"pattern-title-categories"},React.createElement("div",{className:"pattern-title"},e.isLocal&&React.createElement(u.Button,{variant:"link",onClick:function(t){t.preventDefault();var r=encodeURIComponent(window.location.href);window.location.href="".concat(dlxEnhancedPatternsView.getSiteBaseUrl,"post.php?post=").concat(e.id,"&action=edit&redirect_to=").concat(r)}},e.title),!e.isLocal&&React.createElement("span",{className:"pattern-title"},e.title)),e.categorySlugs.length>0&&Object.values(r).length>0&&React.createElement("div",{className:"pattern-categories"},(0,c.__)("Categories:","pattern-wrangler")," ",e.categorySlugs.map((function(t,n){var a,o,i=(null==t?void 0:t.slug)||t.toString();if(!r.hasOwnProperty(i))return null;var l=(null===(a=r[i])||void 0===a?void 0:a.label)||(null===(o=r[i])||void 0===o?void 0:o.name);return React.createElement("span",{key:"category-".concat(n),className:"pattern-category"},l," ",n<e.categorySlugs.length-1&&", ")}))),mt(e)))},enableSorting:!0,enableHiding:!1,enableGlobalSearch:!0},{id:"pattern-view-json",label:(0,c.__)("Preview","pattern-wrangler"),getValue:function(t){var e=t.item,r=e.viewportWidth||1200,n=null!=e&&e.id?"".concat(ajaxurl,"/?action=dlxpw_pattern_preview&pattern_id=").concat(e.id,"&viewport_width=").concat(r):"",a=(0,c.__)("Local","pattern-wrangler"),o="pattern-badge-local",i=(0,c.__)("Disabled","pattern-wrangler"),l=!0;e.isDisabled&&e.isLocal?i=(0,c.__)("Draft","pattern-wrangler"):!e.isDisabled&&e.isLocal?l=!1:e.isDisabled||e.isLocal||(l=!1),e.isLocal?"synced"===e.patternType?(a=(0,c.__)("Local Synced","pattern-wrangler"),o="pattern-badge-synced"):(a=(0,c.__)("Local Unsynced","pattern-wrangler"),o="pattern-badge-unsynced"):(a=(0,c.__)("Registered","pattern-wrangler"),o="pattern-badge-registered");var u=React.createElement(React.Fragment,null,React.createElement("div",{className:"pattern-badge-wrapper"},l&&React.createElement("span",{className:"pattern-badge ".concat("pattern-badge-disabled")},i),React.createElement("span",{className:"pattern-badge ".concat(o)},a)));return React.createElement(React.Fragment,null,u,React.createElement("div",{className:"pattern-preview-wrapper"},React.createElement(Ht,{src:n,title:"Preview: ".concat(e.title),item:e})))},enableSorting:!1,enableHiding:!1},{id:"categories",label:(0,c.__)("Categories","pattern-wrangler"),render:function(t){return t.item,null},enableSorting:!1,enableHiding:!1,enableGlobalSearch:!0,type:"array",filterBy:{operators:["isAny","isNone"]},elements:Object.values(P).map((function(t){return{label:t.label||t.name,value:t.slug}}))},{id:"assets",label:(0,c.__)("Filter Patterns by Source","pattern-wrangler"),render:function(t){return t.item,null},enableHiding:!1,enableGlobalSearch:!0,enableSorting:!1,filterBy:{operators:["is"]},elements:Object.values((0,h.select)(Ot).getAssets()||[]).map((function(t){return{label:t.label,value:t.slug}}))},{elements:[{label:(0,c.__)("All Patterns","pattern-wrangler"),value:"all"},{label:(0,c.__)("Local Patterns","pattern-wrangler"),value:"local"},{label:(0,c.__)("Registered Patterns","pattern-wrangler"),value:"registered"}],enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,filterBy:{operators:["is"]},default:"all",type:"array",id:"patternType",label:(0,c.__)("Pattern Type","pattern-wrangler")},{elements:[{label:(0,c.__)("Unsynced Patterns","pattern-wrangler"),value:"unsynced"},{label:(0,c.__)("Synced Patterns","pattern-wrangler"),value:"synced"},{label:(0,c.__)("Both","pattern-wrangler"),value:"both"}],enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,filterBy:{operators:["is"]},type:"array",id:"patternStatus",label:(0,c.__)("Pattern Status","pattern-wrangler")},{elements:[{label:(0,c.__)("Paused Patterns","pattern-wrangler"),value:"paused"},{label:(0,c.__)("Unpaused Patterns","pattern-wrangler"),value:"unpaused"},{label:(0,c.__)("Both","pattern-wrangler"),value:"both"}],enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,filterBy:{operators:["is"]},type:"array",id:"patternRegisteredStatus",label:(0,c.__)("Pattern Registered Status","pattern-wrangler")},{elements:[{label:(0,c.__)("Draft Patterns","pattern-wrangler"),value:"draft"},{label:(0,c.__)("Published Patterns","pattern-wrangler"),value:"published"},{label:(0,c.__)("Both","pattern-wrangler"),value:"both"}],enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,filterBy:{operators:["is"]},type:"array",id:"patternLocalStatus",label:(0,c.__)("Pattern Local Status","pattern-wrangler")}]}),{elements:[{label:(0,c.__)("Disabled Patterns","pattern-wrangler"),value:"disabled"},{label:(0,c.__)("Enabled Patterns","pattern-wrangler"),value:"enabled"},{label:(0,c.__)("Both","pattern-wrangler"),value:"both"}],enableHiding:!1,enableSorting:!1,enableGlobalSearch:!1,filterBy:{operators:["is"]},type:"array",id:"patternLocalRegisteredStatus",label:(0,c.__)("Pattern Local and Registered Status","pattern-wrangler")},[]),_t=(0,n.useMemo)((function(){return[{id:"quick-edit",label:(0,c.__)("Quick Edit","pattern-wrangler"),icon:"edit",callback:function(t){z({item:t[0]})},isEligible:function(t){return t.isLocal&&!t.isDisabled},isPrimary:!0},{id:"get-code",label:(0,c.__)("Get Code","pattern-wrangler"),icon:"code",callback:function(t){dt({item:t[0]})},isEligible:function(t){return t.isLocal&&!t.isDisabled},isPrimary:!1,supportsBulk:!1},{id:"delete",label:(0,c.__)("Delete Pattern","pattern-wrangler"),icon:"trash",isEligible:function(t){return t.isLocal&&t.isDisabled},callback:function(t){st({items:t})},isPrimary:!1,isDestructive:!0,supportsBulk:!0},{id:"publish",label:(0,c.__)("Publish Pattern","pattern-wrangler"),icon:"yes-alt",isEligible:function(t){return t.isLocal&&t.isDisabled},callback:function(t){rt({items:t})},isPrimary:!1,isDestructive:!1,supportsBulk:!0},{id:"unpause",label:(0,c.__)("Re-enable Pattern","pattern-wrangler"),icon:"controls-play",isEligible:function(t){return!t.isLocal&&t.isDisabled},callback:function(t){it({items:t})},isPrimary:!1,isDestructive:!1,supportsBulk:!0},{id:"copy-to-local",label:(0,c.__)("Copy to Local Pattern","pattern-wrangler"),icon:"edit",callback:function(t){var e=t[0];Y(e.id),Q({item:e})},isEligible:function(t){return!t.isLocal},isPrimary:!1,isDestructive:!1},{id:"disable-preview",label:(0,c.__)("Disable Pattern","pattern-wrangler"),icon:"controls-pause",callback:function(t){Z({items:t})},isEligible:function(t){return!t.isDisabled},isDestructive:!0,supportsBulk:!0,isPrimary:!1},{id:"copy",label:(0,c.__)("Copy Pattern","pattern-wrangler"),icon:"edit",callback:(t=Mt(Bt().mark((function t(e){var r,n,a,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e[0].content.trim(),n=!1,t.prev=2,null===(a=navigator.clipboard)||void 0===a||!a.writeText){t.next=12;break}return t.prev=4,t.next=7,navigator.clipboard.writeText(r);case 7:n=!0,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:if(!n){(o=document.createElement("textarea")).value=r,o.style.position="fixed",o.style.opacity="0",o.style.pointerEvents="none",document.body.appendChild(o),o.select();try{document.execCommand("copy"),n=!0}catch(t){}document.body.removeChild(o)}G({isVisible:!0,message:(0,c.__)("Pattern copied to clipboard","pattern-wrangler"),title:(0,c.__)("Pattern Copied","pattern-wrangler"),type:"success",onClose:function(){G({isVisible:!1})}}),t.next=18;break;case 16:t.prev=16,t.t1=t.catch(2);case 18:case"end":return t.stop()}}),t,null,[[2,16],[4,10]])}))),function(_x){return t.apply(this,arguments)}),isEligible:function(t){return!0},isPrimary:!1,isDestructive:!1},{id:"export",label:(0,c.__)("Export to JSON","pattern-wrangler"),icon:"edit",callback:function(t){var e=t[0].isLocal,r=t[0].title,n="";e?n="unsynced":"synced"===t[0].patternType&&(n="synced");var a=JSON.stringify({__file:"wp_block",title:r,content:t[0].content,syncStatus:n},null,2);(0,o.downloadBlob)("".concat(r,".json"),a,"application/json")},isEligible:function(){return!0},isPrimary:!1,isDestructive:!1}];var t}),[P,_]),St=function(t){var e,r,n=It(_);null!==n&&0!==n.length||(n=It(g.patterns));var a=null==t||null===(e=t.sort)||void 0===e?void 0:e.field,o=null==t||null===(r=t.sort)||void 0===r?void 0:r.direction;"title"===a&&("desc"===o?n.sort((function(t,e){return e.title.localeCompare(t.title)})):n.sort((function(t,e){return t.title.localeCompare(e.title)})));var i=(null==t?void 0:t.filters)||[];i.length>0&&i.forEach((function(t){switch(t.field){case"categories":if(t.value){var e=t.value.map((function(t){return(0,d.cleanForSlug)(t)}));"isAny"===t.operator?n=n.filter((function(t){return(t.categorySlugs||[]).some((function(t){var r=t.name||(0,d.cleanForSlug)(t);return e.includes(r)}))})):"isNone"===t.operator&&(n=n.filter((function(t){return!(t.categorySlugs||[]).some((function(t){var r=t.name||(0,d.cleanForSlug)(t);return e.includes(r)}))})))}break;case"assets":t.value&&"is"===t.operator&&(n=n.filter((function(e){return e.asset===t.value})));break;case"patternType":if(t.value)switch(t.value){case"all":break;case"local":n=n.filter((function(t){return t.isLocal}));break;case"registered":n=n.filter((function(t){return!t.isLocal}))}break;case"patternStatus":if(t.value){var r=i.find((function(t){return"patternType"===t.field}));if(r&&"local"===r.value&&t.value)switch(t.value){case"unsynced":n=n.filter((function(t){return!!t.syncStatus&&"unsynced"===t.syncStatus&&t.isLocal}));break;case"synced":n=n.filter((function(t){return!!t.syncStatus&&"synced"===t.syncStatus&&t.isLocal}))}}break;case"patternLocalStatus":if(t.value){var a=i.find((function(t){return"patternType"===t.field}));if(a&&"local"===a.value&&t.value)switch(t.value){case"draft":n=n.filter((function(t){return t.isDisabled&&t.isLocal}));break;case"published":n=n.filter((function(t){return!t.isDisabled&&t.isLocal}))}}break;case"patternRegisteredStatus":if(t.value){var o=i.find((function(t){return"patternType"===t.field}));if(o&&"registered"===o.value&&t.value)switch(t.value){case"paused":n=n.filter((function(t){return t.isDisabled&&!t.isLocal}));break;case"unpaused":n=n.filter((function(t){return!t.isDisabled&&!t.isLocal}))}}break;case"patternLocalRegisteredStatus":if(t.value){var l=i.find((function(t){return"patternType"===t.field}));if(l&&"all"===l.value&&t.value)switch(t.value){case"disabled":n=n.filter((function(t){return t.isDisabled}));break;case"enabled":n=n.filter((function(t){return!t.isDisabled}))}}}}));var l=(null==t?void 0:t.search)||"";return"undefined"!==l&&""!==l&&(n=n.filter((function(e){return(e.label||e.title).toLowerCase().includes((t.search||l).toLowerCase())}))),n.length},xt=function(t){var e,r,n=It(_);null!==n&&0!==n.length||(n=It(g.patterns));var a=null==t||null===(e=t.sort)||void 0===e?void 0:e.field,o=null==t||null===(r=t.sort)||void 0===r?void 0:r.direction;"title"===a&&("desc"===o?n.sort((function(t,e){return e.title.localeCompare(t.title)})):n.sort((function(t,e){return t.title.localeCompare(e.title)})));var i=(null==t?void 0:t.filters)||[];i.length>0&&i.forEach((function(t){switch(t.field){case"categories":if(t.value){var e=t.value.map((function(t){return(0,d.cleanForSlug)(t)}));"isAny"===t.operator?n=n.filter((function(t){return(t.categorySlugs||[]).some((function(t){var r=t.name||(0,d.cleanForSlug)(t);return e.includes(r)}))})):"isNone"===t.operator&&(n=n.filter((function(t){return!(t.categorySlugs||[]).some((function(t){var r=t.name||(0,d.cleanForSlug)(t);return e.includes(r)}))})))}break;case"assets":t.value&&(n=n.filter((function(e){return e.asset===t.value})));break;case"patternType":if(t.value)switch(t.value){case"all":break;case"local":n=n.filter((function(t){return t.isLocal}));break;case"registered":n=n.filter((function(t){return!t.isLocal}))}break;case"patternStatus":if(t.value){var r=i.find((function(t){return"patternType"===t.field}));if(r&&"local"===r.value&&t.value)switch(t.value){case"unsynced":n=n.filter((function(t){return!!t.syncStatus&&"unsynced"===t.syncStatus&&t.isLocal}));break;case"synced":n=n.filter((function(t){return!!t.syncStatus&&"synced"===t.syncStatus&&t.isLocal}))}}break;case"patternLocalStatus":if(t.value){var a=i.find((function(t){return"patternType"===t.field}));if(a&&"local"===a.value&&t.value)switch(t.value){case"draft":case"paused":n=n.filter((function(t){return t.isDisabled&&t.isLocal}));break;case"published":n=n.filter((function(t){return!t.isDisabled&&t.isLocal}))}}break;case"patternRegisteredStatus":if(t.value){var o=i.find((function(t){return"patternType"===t.field}));if(o&&"registered"===o.value&&t.value)switch(t.value){case"paused":n=n.filter((function(t){return t.isDisabled&&!t.isLocal}));break;case"unpaused":n=n.filter((function(t){return!t.isDisabled&&!t.isLocal}))}}break;case"patternLocalRegisteredStatus":if(t.value){var l=i.find((function(t){return"patternType"===t.field}));if(l&&"all"===l.value&&t.value)switch(t.value){case"disabled":n=n.filter((function(t){return t.isDisabled}));break;case"enabled":n=n.filter((function(t){return!t.isDisabled}))}}}}));var l=(null==t?void 0:t.search)||"";return"undefined"!==l&&""!==l&&(n=n.filter((function(e){return(e.label||e.title).toLowerCase().includes((t.search||l).toLowerCase())}))),n.slice((t.page-1)*t.perPage,t.page*t.perPage)},Lt=function(t){var e,r,n,a,o,i,l=(0,d.getQueryArgs)(window.location.href);l.paged=t.page||1,l.perPage=t.perPage,t.search?l.search=t.search:l.search="",null!==(e=t.sort)&&void 0!==e&&e.field&&(l.orderby=t.sort.field,l.order=t.sort.direction);var c=null===(r=t.filters)||void 0===r?void 0:r.find((function(t){return"patternType"===t.field})),u=null===(n=t.filters)||void 0===n?void 0:n.find((function(t){return"patternStatus"===t.field}));c&&(l.patternType=c.value),u&&(l.patternStatus=u.value);var s=null===(a=t.filters)||void 0===a?void 0:a.find((function(t){return"patternRegisteredStatus"===t.field})),f=null===(o=t.filters)||void 0===o?void 0:o.find((function(t){return"patternLocalStatus"===t.field})),p=null===(i=t.filters)||void 0===i?void 0:i.find((function(t){return"patternLocalRegisteredStatus"===t.field}));s&&!p&&(l.patternRegisteredStatus=s.value),f&&!p&&(l.patternLocalStatus=f.value),p&&(l.patternLocalRegisteredStatus=p.value);var h=(0,d.addQueryArgs)(window.location.pathname,l);(0,d.getQueryArgs)(window.location.href).search&&!t.search&&(h=(0,d.removeQueryArgs)(h,"search")),L(xt(t)),window.history.pushState({},"",h),l.page=l.paged,bt(Gt(Gt({},t),l))};return(0,n.useEffect)((function(){window.addEventListener("popstate",(function(){Lt(vt())}))}),[wt]),(0,n.useEffect)((function(){if(g&&g.hasOwnProperty("patterns")&&g.categories){var t=Et.findIndex((function(t){return"categories"===t.id})),e=[],r="";Et[t].elements=Object.values(g.categories).map((function(t){var n=t.label;return r===t.label&&(n="".concat(n," (").concat(t.count+1,")")),r=t.label,t.registered||e.push({id:t.id,label:t.label}),{label:n,value:t.slug}}));var n=Gt(Gt({},wt),{},{fields:It(Et)});if(R(e),bt(n),g.patterns&&g.patterns!==x){var a=xt(wt);L(a)}j(!1)}}),[g]),k?React.createElement(React.Fragment,null,"Loading..."):React.createElement("div",{className:"dlx-patterns-view-container-wrapper"},React.createElement("div",{className:"dlx-patterns-view-container"},React.createElement(p.A,{data:x,fields:Et,actions:_t,label:(0,c.__)("Patterns","pattern-wrangler"),view:wt,onChangeView:Lt,paginationInfo:{totalItems:St(wt),totalPages:Math.ceil(St(wt)/wt.perPage)},perPageSizes:[12,24,48,96],selection:b,onChangeSelection:E,defaultLayouts:$t,searchLabel:(0,c.__)("Search Patterns","pattern-wrangler")},React.createElement("div",{className:"dlx-patterns-view-container-header"},React.createElement("h1",null,(0,c.__)("Pattern Library","pattern-wrangler"))),React.createElement("div",{className:"dlx-patterns-view-quick-buttons-wrapper"},React.createElement(u.Button,{variant:"primary",className:"dlx-patterns-view-quick-button",onClick:function(){B(!0)}},(0,c.__)("Add New Pattern","pattern-wrangler")),React.createElement(u.FormFileUpload,{accept:".json",variant:"secondary",className:"dlx-patterns-view-quick-button",onChange:function(){var t=Mt(Bt().mark((function t(e){var r,n,a,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.target.files[0],t.prev=1,t.next=4,At(r);case 4:return n=t.sent,t.next=7,f()({path:"/wp/v2/blocks",method:"POST",data:{title:n.title,content:n.content,status:"publish",meta:{wp_pattern_sync_status:n.syncStatus}}});case 7:if(null==(a=t.sent)||!a.id){t.next=13;break}return t.next=11,f()({path:"/dlxplugins/pattern-wrangler/v1/patterns/get/".concat(a.id),method:"GET"});case 11:(o=t.sent)&&(0,h.dispatch)(Ot).addPattern(o);case 13:t.next=17;break;case 15:t.prev=15,t.t0=t.catch(1);case 17:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},(0,c.__)("Import Pattern From JSON File","pattern-wrangler"))),React.createElement("div",{className:"dlx-patterns-view-grid"},React.createElement("div",{className:"dlx-patterns-view-search-filters-wrapper"},React.createElement(p.A.Search,{label:(0,c.__)("Search Patterns","pattern-wrangler")}),React.createElement(p.A.FiltersToggle,null)),React.createElement("div",{className:"dlx-patterns-view-button-actions-wrapper"},React.createElement(u.__experimentalToggleGroupControl,{label:(0,c.__)("Pattern Type","pattern-wrangler"),isAdaptiveWidth:!0,hideLabelFromVision:!0,value:(null==wt||null===(e=wt.filters)||void 0===e||null===(e=e.find((function(t){return"patternType"===t.field})))||void 0===e?void 0:e.value)||"all",onChange:function(t){var e,r=Gt({},wt),n=(null===(e=r.filters)||void 0===e?void 0:e.filter((function(t){return"patternType"!==t.field})))||[];r.filters=[].concat(It(n),[{field:"patternType",operator:"is",value:t}]),r.page=1,Lt(r);var a=window.location.href;switch(t){case"all":a=(0,d.removeQueryArgs)(a,"patternStatus"),a=(0,d.removeQueryArgs)(a,"patternRegisteredStatus"),a=(0,d.removeQueryArgs)(a,"patternLocalStatus"),a=(0,d.removeQueryArgs)(a,"patternLocalRegisteredStatus"),window.history.pushState({},"",a);break;case"local":a=(0,d.removeQueryArgs)(a,"patternRegisteredStatus"),a=(0,d.removeQueryArgs)(a,"patternLocalRegisteredStatus"),window.history.pushState({},"",a);break;case"registered":a=(0,d.removeQueryArgs)(a,"patternStatus"),a=(0,d.removeQueryArgs)(a,"patternLocalStatus"),a=(0,d.removeQueryArgs)(a,"patternLocalRegisteredStatus"),window.history.pushState({},"",a)}}},React.createElement(u.__experimentalToggleGroupControlOption,{value:"local",label:(0,c.__)("Local","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Local Patterns","pattern-wrangler")}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"all",label:(0,c.__)("All","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show All Patterns","pattern-wrangler")}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"registered",label:(0,c.__)("Registered","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Registered Patterns","pattern-wrangler")})),"registered"===(null==wt||null===(r=wt.filters)||void 0===r||null===(r=r.find((function(t){return"patternType"===t.field})))||void 0===r?void 0:r.value)&&React.createElement(React.Fragment,null,React.createElement(u.__experimentalToggleGroupControl,{label:(0,c.__)("Registered Status","pattern-wrangler"),isAdaptiveWidth:!0,hideLabelFromVision:!0,value:(null==wt||null===(a=wt.filters)||void 0===a||null===(a=a.find((function(t){return"patternRegisteredStatus"===t.field})))||void 0===a?void 0:a.value)||"both",onChange:function(t){var e,r=Gt({},wt),n=(null===(e=r.filters)||void 0===e?void 0:e.filter((function(t){return"patternRegisteredStatus"!==t.field})))||[];r.filters=[].concat(It(n),[{field:"patternRegisteredStatus",operator:"is",value:t}]),r.page=1,Lt(r)}},React.createElement(u.__experimentalToggleGroupControlOption,{value:"paused",label:(0,c.__)("Disabled","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Disabled Patterns","pattern-wrangler")}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"both",label:(0,c.__)("Both","pattern-wrangler"),"aria-label":(0,c.__)("Show Both Disabled and Enabled Patterns","pattern-wrangler"),showTooltip:!0}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"unpaused",label:(0,c.__)("Enabled","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Enabled Patterns","pattern-wrangler")}))),"local"===(null==wt||null===(i=wt.filters)||void 0===i||null===(i=i.find((function(t){return"patternType"===t.field})))||void 0===i?void 0:i.value)&&React.createElement(React.Fragment,null,React.createElement(u.__experimentalToggleGroupControl,{label:(0,c.__)("Pattern Status","pattern-wrangler"),isAdaptiveWidth:!0,hideLabelFromVision:!0,value:(null==wt||null===(s=wt.filters)||void 0===s||null===(s=s.find((function(t){return"patternStatus"===t.field})))||void 0===s?void 0:s.value)||"both",onChange:function(t){var e,r=Gt({},wt),n=(null===(e=r.filters)||void 0===e?void 0:e.filter((function(t){return"patternStatus"!==t.field})))||[];r.filters=[].concat(It(n),[{field:"patternStatus",operator:"is",value:t}]),r.page=1,Lt(r)}},React.createElement(u.__experimentalToggleGroupControlOption,{value:"unsynced",label:(0,c.__)("Unsynced","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Unsynced Patterns","pattern-wrangler")}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"both",label:(0,c.__)("Both","pattern-wrangler"),"aria-label":(0,c.__)("Show Both Synced and Unsynced Patterns","pattern-wrangler"),showTooltip:!0}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"synced",label:(0,c.__)("Synced","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Synced Patterns","pattern-wrangler")})),React.createElement(u.__experimentalToggleGroupControl,{label:(0,c.__)("Published Status","pattern-wrangler"),isAdaptiveWidth:!0,hideLabelFromVision:!0,value:(null==wt||null===(y=wt.filters)||void 0===y||null===(y=y.find((function(t){return"patternLocalStatus"===t.field})))||void 0===y?void 0:y.value)||"both",onChange:function(t){var e,r=Gt({},wt),n=(null===(e=r.filters)||void 0===e?void 0:e.filter((function(t){return"patternLocalStatus"!==t.field})))||[];r.filters=[].concat(It(n),[{field:"patternLocalStatus",operator:"is",value:t}]),r.page=1,Lt(r)}},React.createElement(u.__experimentalToggleGroupControlOption,{value:"draft",label:(0,c.__)("Draft","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Draft Patterns","pattern-wrangler")}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"both",label:(0,c.__)("Both","pattern-wrangler"),"aria-label":(0,c.__)("Show Both Draft and Published Patterns","pattern-wrangler"),showTooltip:!0}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"published",label:(0,c.__)("Published","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Published Patterns","pattern-wrangler")}))),"all"===(null==wt||null===(v=wt.filters)||void 0===v||null===(v=v.find((function(t){return"patternType"===t.field})))||void 0===v?void 0:v.value)&&React.createElement(React.Fragment,null,React.createElement(u.__experimentalToggleGroupControl,{label:(0,c.__)("Disabled Status","pattern-wrangler"),isAdaptiveWidth:!0,hideLabelFromVision:!0,value:(null==wt||null===(m=wt.filters)||void 0===m||null===(m=m.find((function(t){return"patternLocalRegisteredStatus"===t.field})))||void 0===m?void 0:m.value)||"both",onChange:function(t){var e,r=Gt({},wt),n=(null===(e=r.filters)||void 0===e?void 0:e.filter((function(t){return"patternLocalRegisteredStatus"!==t.field})))||[];r.filters=[].concat(It(n),[{field:"patternLocalRegisteredStatus",operator:"is",value:t}]),r.page=1,Lt(r)}},React.createElement(u.__experimentalToggleGroupControlOption,{value:"disabled",label:(0,c.__)("Disabled","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Disabled Local and Registered Patterns","pattern-wrangler")}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"both",label:(0,c.__)("Both","pattern-wrangler"),"aria-label":(0,c.__)("Show Both Disabled and Enabled Local and Registered Patterns","pattern-wrangler"),showTooltip:!0}),React.createElement(u.__experimentalToggleGroupControlOption,{value:"enabled",label:(0,c.__)("Enabled","pattern-wrangler"),showTooltip:!0,"aria-label":(0,c.__)("Show Only Enabled Local and Registered Patterns","pattern-wrangler")})))),React.createElement("div",{className:"dlx-patterns-view-layout-pagination-wrapper"},React.createElement(p.A.ViewConfig,null),React.createElement(p.A.LayoutSwitcher,null))),React.createElement("div",{className:"dlx-patterns-view-filters-wrapper"},React.createElement(p.A.Filters,null)),React.createElement("div",{className:"dlx-bulk-action-toolbar-top"},React.createElement(p.A.BulkActionToolbar,null)),React.createElement(p.A.Layout,null),React.createElement(p.A.BulkActionToolbar,null),React.createElement(p.A.Pagination,null)),D.isVisible&&React.createElement(C,{isVisible:D.isVisible,message:D.message,title:D.title,type:D.type,onClose:function(){G({isVisible:!1})}})),I&&React.createElement(q,{isOpen:I,onRequestClose:function(){return B(!1)},categories:T,title:(0,c.__)("Create New Pattern","pattern-wrangler")}),M&&React.createElement(q,{isOpen:M,onRequestClose:function(){return Q(!1)},categories:T,title:(0,c.__)("Copy Pattern to Local","pattern-wrangler"),syncedDefaultStatus:"unsynced",copyPatternId:M.item.id}),$&&React.createElement(q,{isOpen:$,onRequestClose:function(){return z(null)},pattern:$.item,patternTitle:$.item.title,categories:T,patternCategories:$.item.categories,title:(0,c.__)("Quick Edit Pattern","pattern-wrangler"),syncedDisabled:!0,patternId:$.item.id,patternNonce:$.item.editNonce,isEditMode:!0,onEdit:function(t){(0,h.dispatch)(Ot).upsertCategory(t.categories),(0,h.dispatch)(Ot).setPattern(t.patternId,t.patternTitle,t.categorySlugs,t.categorySlugs),z(null)}}),K&&React.createElement(W,{items:K.items,onPause:function(t,e){(0,h.dispatch)(Ot).disablePatterns(e),Z(null),G({isVisible:!0,message:(0,c.__)("Patterns disabled","pattern-wrangler"),title:(0,c.__)("Patterns Disabled","pattern-wrangler"),type:"success",onClose:function(){G({isVisible:!1})}})},onRequestClose:function(){return Z(null)}}),et&&React.createElement(X,{items:et.items,onPublish:function(t,e){(0,h.dispatch)(Ot).enablePatterns(e),rt(null),G({isVisible:!0,message:(0,c.__)("Patterns published","pattern-wrangler"),title:(0,c.__)("Patterns Published","pattern-wrangler"),type:"success",onClose:function(){G({isVisible:!1})}})},onRequestClose:function(){return rt(null)}}),ot&&React.createElement(nt,{items:ot.items,onReenable:function(t,e){(0,h.dispatch)(Ot).enablePatterns(e),it(null),G({isVisible:!0,message:(0,c.__)("Patterns re-enabled","pattern-wrangler"),title:(0,c.__)("Patterns Re-enabled","pattern-wrangler"),type:"success",onClose:function(){G({isVisible:!1})}})},onRequestClose:function(){return it(null)}}),ut&&React.createElement(ct,{items:ut.items,onDelete:function(t,e){(0,h.dispatch)(Ot).deletePatterns(e),st(null)},onRequestClose:function(){return st(null)}}),pt&&React.createElement(yt,{item:pt.item,onRequestClose:function(){return dt(null)}}))};const Jt=function(t){var e=(0,h.useSelect)((function(t){return{data:t(Ot).getData(),loading:t(Ot).getLoading(),error:t(Ot).getError()}})),r=e.data,a=e.loading,o=e.error;return(0,n.useEffect)((function(){(0,h.dispatch)(Ot).fetchData()}),[]),a?React.createElement("div",{className:"dlx-patterns-view-container-wrapper"},React.createElement("div",{className:"dlx-patterns-view-container"},React.createElement("div",{className:"dataviews-wrapper"},React.createElement("div",{className:"dlx-patterns-view-container-header"},React.createElement("h1",null,(0,c.__)("Loading patterns…","pattern-wrangler")),React.createElement(v(),{size:30,color:"#3c434a"}))))):o?React.createElement("div",{className:"dlx-patterns-view-error"},React.createElement("p",null,(0,c.__)("Error loading patterns:","pattern-wrangler")," ",o),React.createElement(u.Button,{variant:"primary",onClick:function(){return(0,h.dispatch)(Ot).fetchData()}},(0,c.__)("Retry","pattern-wrangler"))):React.createElement(zt,qt({data:r},t))}}}]);